<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="A while ago I read this (chinese) article talking about how people build complicated architecture with log approach, back to then I didn’t quite get i">
    

    <!--Author-->
    
        <meta name="author" content="Andrew Yan">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="I love the concept of &#39;anything can be log&#39;"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Code Monkey"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>I love the concept of &#39;anything can be log&#39; - Code Monkey</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Code Monkey</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>I love the concept of 'anything can be log'</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2017-03-06
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/meta/">#meta</a> <a href="/tags/js/">#js</a> <a href="/tags/redux/">#redux</a> <a href="/tags/architecture/">#architecture</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>A while ago I read <a href="https://medium.com/poga/%E8%90%AC%E4%BA%8B%E8%90%AC%E7%89%A9%E7%9A%86%E6%98%AF-log-%E7%B3%BB%E7%B5%B1%E6%9E%B6%E6%A7%8B%E4%B9%9F%E4%BE%86%E9%BB%9E%E7%A7%91%E6%99%AE-caf3029359f8#.t37drl8hz" target="_blank" rel="external">this</a> (chinese) article talking about how people build complicated architecture with log approach, back to then I didn’t quite get it, but it did scratched something - something I am really longing with. A insight for better software architecture.</p>
<p>The article mentions that log is used in almost everywhere, because log has the following features:</p>
<p><strong>Timestamp</strong> - a log has timestamp describing when happens what.</p>
<p><strong>Sequence</strong> - since every log has a timestamp, we can line it up, make it an array. In that way you can see a timeline of events describing what happens in a system.</p>
<p><strong>Describing Actions</strong> - instead of really executing something, log just describes what is going to do.</p>
<p>Log has been used in many domains like version control, database, replication, event stream and many other aspects for solving complicated problems.</p>
<p>Imagine we have a database, and it is writing something into disk, and suddenly computer crashed. Here comes the problem - how do we restore database to the point before crash and let it continue its job?</p>
<p>The answer is log, it writes log first, and then, really executing the action. Since we have a <strong>log that describing the system state</strong>, we can resume the state and make it continue its job.</p>
<p>Log can even be used in replication as well. Syncing data among all machines/process is not an easy thing. How do you keep data on all machines identical while sharing? Move physical data? That would be inefficient because physical data is large and plus network bandwidth issue. How about sending log instead? Log is relatively small and actually its just an <strong>history of state</strong>, instead of sending physical data, we send a series actions that should be carried out, and by following the same trial, state should be the same in the end.</p>
<p>And what’s the point when it comes to front-end? Today’s front-end is way more interactive than 15 years ago. Lots of actions and events come and go in our application. Trendy developers probably have heard <code>Redux</code> - a central event management implementation for resolving complicated events.</p>
<p>One of a reason that really makes <code>Redux</code> great is, yes, log. In <code>Redux</code> we deliver log first, and delay the <strong>action (side effect / mutation)</strong> afterward.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fetchDataLoadingAction = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">"FETCH_DATA_LOADING"</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> fetchDataDonesAction = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">"FETCH_DATA_DONE"</span>,</div><div class="line">  <span class="attr">payload</span>: data</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> fetchDataFailAction = <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">"FETCH_DATA_FAIL"</span>,</div><div class="line">  <span class="attr">payload</span>: err</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Despite there are <strong>Action</strong> in those names (a common naming convention for redux), those are actually logs describing an action, and if we want to execute an action, we can wrap it in a function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// here we use redux-thunk for handling simple async or combining serious of actions together.</span></div><div class="line"><span class="keyword">const</span> fetchData = <span class="function"><span class="params">()</span> =&gt;</span> (dispatch) =&gt; &#123;</div><div class="line">  dispatch(fetchDataLoadingAction());</div><div class="line">  fetchDataAjax()</div><div class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> dispatch(fetchDataDoneAction(data)))</div><div class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> dispatch(fetchDataFailAction(err)));</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// keeping new state in our reducer</span></div><div class="line"><span class="keyword">const</span> INIT_STATE = &#123;</div><div class="line">  <span class="attr">fetchState</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">data</span>:       &#123;&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> reducer = <span class="function">(<span class="params">state = INIT_STATE, action</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">switch</span>(action.type)&#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">"FETCH_DATA_LOADING"</span>: &#123;</div><div class="line">      <span class="keyword">return</span> &#123;...state, <span class="attr">fetchState</span>: <span class="string">"loading"</span>&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">case</span> <span class="string">"FETCH_DATA_DONE"</span>: &#123;</div><div class="line">      <span class="keyword">return</span> &#123;<span class="attr">fetchState</span>: <span class="string">"success"</span>, <span class="attr">data</span>: action.payload&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">case</span> <span class="string">"FETCH_DATA_FAIL"</span>: &#123;</div><div class="line">      <span class="keyword">return</span> &#123;<span class="attr">fetchState</span>: <span class="string">"fail"</span>, <span class="attr">data</span>: action.payload&#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> state;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// later...</span></div><div class="line">store.dispatch(fetchData());</div><div class="line"></div><div class="line"><span class="comment">// if you have installed redux-logger you will see something similar to this</span></div><div class="line"><span class="comment">// action: &#123; type: "FETCH_DATA_LOADING" &#125;</span></div><div class="line"><span class="comment">// state: &#123; fetchState: "loading", data: &#123;&#125; &#125;</span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="comment">// action: &#123; type: "FETCH_DATA_DONE", payload: "foobar" &#125;</span></div><div class="line"><span class="comment">// state: &#123; fetchState: "success", data: "foobar" &#125;</span></div></pre></td></tr></table></figure>
<p>By using log, developers can manipulate the timeline of an application, performing actions like undo and redo or jump to a specific time of state for debugging. This is the beauty of log.</p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                        <li>
                            <a href="https://twitter.com/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://www.facebook.com/zushen.yan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://github.com/zushenyan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://tw.linkedin.com/in/zushenyan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    
                </ul>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>