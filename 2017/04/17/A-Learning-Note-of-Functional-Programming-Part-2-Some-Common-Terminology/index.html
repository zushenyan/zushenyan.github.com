<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="PrefaceThis is another note for introducing some common terms or words that you may see in functional programming world.
Examples here will be impleme">
    

    <!--Author-->
    
        <meta name="author" content="Andrew Yan">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="A Learning Note of Functional Programming Part 2 - Some Common Terminology"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Code Monkey"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>A Learning Note of Functional Programming Part 2 - Some Common Terminology - Code Monkey</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Code Monkey</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>A Learning Note of Functional Programming Part 2 - Some Common Terminology</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2017-04-17
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/meta/">#meta</a> <a href="/tags/functional-programming/">#functional programming</a> <a href="/tags/js/">#js</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>This is another note for introducing some common terms or words that you may see in functional programming world.</p>
<p>Examples here will be implemented in either vanilla JS or <a href="http://ramdajs.com/" target="_blank" rel="external">Ramda</a> - a functional library that focuses on functional programming than other general-purpose same purpose libraries.</p>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><p><code>Map</code> is a function which transforms data from one to any type (including itself):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// array of number to array of number (transform to itself)</span></div><div class="line"><span class="comment">// [2,3,4]</span></div><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="comment">// array of number to array of obj (transform to other types)</span></div><div class="line"><span class="comment">// [</span></div><div class="line"><span class="comment">//   &#123; num: 1 &#125;,</span></div><div class="line"><span class="comment">//   &#123; num: 2 &#125;,</span></div><div class="line"><span class="comment">//   &#123; num: 3 &#125;</span></div><div class="line"><span class="comment">// ]</span></div><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> (&#123; <span class="attr">num</span>: x &#125;));</div></pre></td></tr></table></figure>
<h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><p><code>Filter</code> is a function which takes a <strong>predicate</strong> (a function takes an argument and return a boolean) and an list and finally returns an list:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// array of number to array of number</span></div><div class="line"><span class="comment">// [2,4]</span></div><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>);</div></pre></td></tr></table></figure>
<h1 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h1><p><code>Reduce</code> takes a function, an initial value and transforms data to any type (including itself):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// array of number to nunber</span></div><div class="line"><span class="comment">// 10</span></div><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce(</div><div class="line">  <span class="function">(<span class="params">acc, value</span>) =&gt;</span> &#123;</div><div class="line">    acc += value;</div><div class="line">    <span class="keyword">return</span> acc;</div><div class="line">  &#125;, <span class="number">0</span></div><div class="line">);</div></pre></td></tr></table></figure>
<h1 id="Transduce"><a href="#Transduce" class="headerlink" title="Transduce"></a>Transduce</h1><p>You might find that you can implement <code>map</code> and <code>filter</code> in <code>reduce</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> map = <span class="function">(<span class="params">f, arr</span>) =&gt;</span> &#123;</div><div class="line">  arr.reduce(<span class="function">(<span class="params">acc, value</span>) =&gt;</span> &#123;</div><div class="line">    acc.push(f(value));</div><div class="line">    <span class="keyword">return</span> acc;</div><div class="line">  &#125;, []);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> filter = <span class="function">(<span class="params">predicate, arr</span>) =&gt;</span> &#123;</div><div class="line">  arr.reduce(<span class="function">(<span class="params">acc, value</span>) =&gt;</span> &#123;</div><div class="line">    f(value) &amp;&amp; acc.push(value);</div><div class="line">    <span class="keyword">return</span> acc;</div><div class="line">  &#125;, []);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Basically, <code>reduce</code> does two things at same time - <strong>transform</strong> and <strong>accumulation</strong>, but in FP, a good function only does one thing at a time.</p>
<p>Separating helps function composition and code reusability. We can achieve that by using <code>transduce</code> - a function takes <code>transducer</code>, <code>accumulator</code> functions and an initial value as arguments.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Ramds's transduce.</span></div><div class="line"><span class="keyword">const</span> data       = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">const</span> double     = <span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>; <span class="comment">// transformer</span></div><div class="line"><span class="keyword">const</span> add        = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y; <span class="comment">// accumulator</span></div><div class="line"><span class="keyword">const</span> transducer = R.map(double); <span class="comment">// transformer's collection</span></div><div class="line">R.transduce(transducer, add, <span class="number">0</span>, data); <span class="comment">// 12</span></div></pre></td></tr></table></figure>
<h1 id="Curry"><a href="#Curry" class="headerlink" title="Curry"></a>Curry</h1><p>Outside the world of FP, functions can only be carried out when all arguments have been passed in.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</div><div class="line">add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></div></pre></td></tr></table></figure></p>
<p>In FP world, functions will be executed only when the last argument has been passed in. A curried function with partially arguments being passed in is called <strong>partially applied</strong> function.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Here I use Ramda's curry to make a function curried</span></div><div class="line"><span class="keyword">const</span> add = R.curry(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y);</div><div class="line"><span class="keyword">const</span> add1 = add(<span class="number">1</span>); <span class="comment">// when the last argument hasn't been fulfilled, returns a function instead;</span></div><div class="line">add1(<span class="number">2</span>); <span class="comment">// 3</span></div><div class="line">add(<span class="number">1</span>)(<span class="number">2</span>); <span class="comment">// or you can do this</span></div><div class="line">add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// all of them result the same</span></div></pre></td></tr></table></figure>
<p>And here is a simple <code>curry</code> implementation taking up to 2 arguments only:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> curry      = <span class="function">(<span class="params">fn</span>) =&gt;</span> (x) =&gt; <span class="function">(<span class="params">y</span>) =&gt;</span> fn(x, y);</div><div class="line"><span class="keyword">const</span> add        = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</div><div class="line"><span class="keyword">const</span> curriedAdd = curry(add);</div><div class="line">curriedAdd(<span class="number">1</span>)(<span class="number">2</span>); <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>Curry is good for function composition, I will introduce them in next section.</p>
<h1 id="Compose"><a href="#Compose" class="headerlink" title="Compose"></a>Compose</h1><p><code>compose</code> is a function that takes many <strong>transformers</strong> and compresses them into a function. This is also called <code>pipe</code> or <code>sequence</code> in other languages or libraries.</p>
<p>For the sake of simplicity I only make <code>compose</code> take two functions. In practical world <code>compose</code> can actually take as many functions as you want, not limit to two.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> compose            = R.curry(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (val) =&gt; f(g(val)));</div><div class="line"><span class="keyword">const</span> trim               = <span class="function">(<span class="params">x</span>) =&gt;</span> x.trim();</div><div class="line"><span class="keyword">const</span> toUpperCase        = <span class="function">(<span class="params">x</span>) =&gt;</span> x.toUpperCase();</div><div class="line"><span class="keyword">const</span> trimAndToUpperCase = compose(trim, toUpperCase);</div><div class="line">trimAndToUpperCase(<span class="string">"  Hello World  "</span>); <span class="comment">// "HELLO WORLD"</span></div></pre></td></tr></table></figure>
<p>Beware of its evaluation order - <code>f(g(val))</code>, functions will be evaluated in upside down. If you think it is not human friendly, in Ramda you can use <a href="http://ramdajs.com/docs/#pipe" target="_blank" rel="external">pipe</a> to get it evaluated from top to down.</p>
<p>Here it’s why <code>curry</code> shines. The benefit of <code>curry</code> is when using with <code>compose</code>, we don’t have to mention data when building our transformer. Processing data without mentioning <strong>at initial</strong> is called <strong>point-of-free</strong> or <strong>pointfree</strong>. In other words we only care about our data’s name when we start transforming.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> add1          = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> double        = <span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="comment">// not pointfree</span></div><div class="line"><span class="keyword">const</span> add1AndDouble = <span class="function">(<span class="params">data</span>) =&gt;</span> double(add1(data));</div><div class="line"></div><div class="line"><span class="comment">// pointfree</span></div><div class="line"><span class="keyword">const</span> betterAdd1AndDouble = R.compose(add1, double);</div></pre></td></tr></table></figure>
<h1 id="Functor"><a href="#Functor" class="headerlink" title="Functor"></a>Functor</h1><p><code>Functor</code> in short explanation is:</p>
<ul>
<li>a container traps values inside.</li>
<li>container can trap anything, like function or even <code>Functor</code> itself.</li>
<li><code>Functor</code> is an <strong>mappable</strong> object. Something implements <code>map</code> function.</li>
</ul>
<p>Here is a <code>Functor</code> implemented in OOP.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Functor</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(val)&#123;</div><div class="line">    <span class="keyword">this</span>._val = val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> <span class="keyword">of</span>(val)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Functor(val);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  map(f)&#123;</div><div class="line">    <span class="keyword">return</span> Functor.of(f(<span class="keyword">this</span>._val));</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// &#123; _val: 6 &#125;</span></div><div class="line">Functor.of(<span class="number">5</span>).map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>There is a very common example of <code>Functor</code> that every JS developer is familiar with - array.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>There are two common advanced types of <code>Functor</code> - one is <code>Maybe</code> and the other is <code>Either</code>.</p>
<h3 id="Maybe"><a href="#Maybe" class="headerlink" title="Maybe"></a>Maybe</h3><p>In other languages like Scala or OCaml, <code>Maybe</code> is also called <code>Option</code>. <code>Maybe</code> is a type which represents <strong>something</strong> or <strong>nothing</strong>.</p>
<p>This is especially good when dealing with <code>Functors</code> containing a <strong>null</strong> value, because when you try to apply function to <strong>null</strong> value, it fails softly.</p>
<p>You won’t confuse your user with an wild error or stuck them in plain white screen.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Maybe</span> <span class="keyword">extends</span> <span class="title">Functor</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> <span class="keyword">of</span>(val)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Maybe(val);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  map(f)&#123;</div><div class="line">    <span class="keyword">return</span> Maybe.of(<span class="keyword">this</span>._val &amp;&amp; f(<span class="keyword">this</span>._val));</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> add1 = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>;</div><div class="line">Maybe.of(<span class="number">5</span>).map(add1); <span class="comment">// 6</span></div><div class="line">Maybe.of(<span class="literal">null</span>).map(add1); <span class="comment">// null</span></div></pre></td></tr></table></figure>
<h1 id="Either"><a href="#Either" class="headerlink" title="Either"></a>Either</h1><p>Most programming languages have <code>throw/catch</code> mechanics for error handling,<br>however <code>throw/catch</code> isn’t nice in FP because of two reasons:</p>
<ul>
<li>it breaks the composition of functions.</li>
<li><code>throw/catch</code> hard fails program if errors were not caught. This is not a pure action.</li>
</ul>
<p><code>Either</code> is the right candidate for this scenario. Basically it’s like <strong>ternary operator</strong> <code>condition ? exp1 : exp2</code>,<br>except it’s a function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">either(left, right, val)</div></pre></td></tr></table></figure>
<p>It execute/return <code>right</code> only when the condition of <code>right</code> has been fulfilled, otherwise <code>left</code> instead.</p>
<p>Here it’s a simple implementation of <code>Either</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Either</span></span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(left, right)&#123;</div><div class="line">    <span class="keyword">this</span>.left = left;</div><div class="line">    <span class="keyword">this</span>.right = right;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> <span class="keyword">of</span>(left, right)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Either(left, right);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  map(f)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.right ? Either.of(<span class="keyword">this</span>.left, f(<span class="keyword">this</span>.right)) : Either.of(f(<span class="keyword">this</span>.left), <span class="keyword">this</span>.right);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>;</div><div class="line">Either.of(<span class="number">123</span>, <span class="number">456</span>).map(add); <span class="comment">// Either(123, 457)</span></div><div class="line">Either.of(<span class="number">123</span>, <span class="literal">null</span>).map(add); <span class="comment">// Either(124, null)</span></div></pre></td></tr></table></figure>
<h1 id="Applicative-Functor"><a href="#Applicative-Functor" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h1><p><code>Applicative Functor (AP)</code> is an advanced type of <code>Functor</code>. I just mentioned <code>Functor</code> can contain anything including functions, and one of the definition of <code>Functor</code> is it’s <strong>mappable</strong>. Now here comes a question - how do you <code>map</code> a function?</p>
<p>The answer is we use <code>ap</code> to apply arguments to functions:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Functor</span></span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(val)&#123;</div><div class="line">    <span class="keyword">this</span>._val = val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> <span class="keyword">of</span>(val)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Functor(val);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  map(f)&#123;</div><div class="line">    <span class="keyword">return</span> Functor.of(f(<span class="keyword">this</span>._val));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// F means functor not function</span></div><div class="line">  ap(F)&#123;</div><div class="line">    <span class="keyword">return</span> Functor.of(<span class="keyword">this</span>._val(F._val));</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> add = curry(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y); <span class="comment">// a curried version of add</span></div><div class="line"></div><div class="line">Functor.of(add).ap(Functor.of(<span class="number">5</span>)).ap(Functor.of(<span class="number">6</span>)); <span class="comment">// Functor(11)</span></div><div class="line">Functor.of(add(<span class="number">5</span>)).ap(Functor.of(<span class="number">6</span>)); <span class="comment">// Functor(11)</span></div><div class="line">Functor.of(<span class="number">5</span>).map(add).ap(Functor.of(<span class="number">6</span>)) <span class="comment">// Functor(11)</span></div><div class="line">Functor.of(<span class="number">5</span>).map(add(<span class="number">6</span>)); <span class="comment">// Functor(11)</span></div></pre></td></tr></table></figure>
<h3 id="lift"><a href="#lift" class="headerlink" title="lift"></a>lift</h3><p>Let’s take a look at this example more closely:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Functor.of(add).ap(Functor.of(<span class="number">5</span>)).ap(Functor.of(<span class="number">6</span>));</div></pre></td></tr></table></figure>
<p>This syntax is not quite elegant and functional enough. What if I already have <code>add</code> function and I want to make it able to automatically process it’s argument in <code>Functor</code> level?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// As we know `Array` is a common kind of Functor.</span></div><div class="line"><span class="comment">// expect [3]</span></div><div class="line">add([<span class="number">1</span>], [<span class="number">2</span>]); <span class="comment">// "12" Oops</span></div></pre></td></tr></table></figure>
<p>let’s use <code>lift</code> to <strong>lift its arguments to functor</strong> without using <code>Functor.of(x)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Use Ramda's add because it's already curried.</span></div><div class="line"><span class="comment">// Use Ramda's lift to do lifting.</span></div><div class="line"><span class="keyword">const</span> addA2 = lift(add);</div><div class="line">addA2([<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>]); <span class="comment">// [4,7,5,8] remember functor is mappable.</span></div></pre></td></tr></table></figure>
<h1 id="Monad"><a href="#Monad" class="headerlink" title="Monad"></a>Monad</h1><p>There is another scenario - anything can be a value of <code>Functor</code>, including <code>Functor</code> itself.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Functor.of(</div><div class="line">  Functor.of(</div><div class="line">    Functor.of(<span class="number">42</span>)</div><div class="line">  )</div><div class="line">);</div></pre></td></tr></table></figure>
<p>With <code>Functor</code> in this status, our <code>map</code> magic doesn’t work. In order to apply function to our value, we have to <strong>flatten</strong> it first.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Functor</span></span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(val)&#123;</div><div class="line">    <span class="keyword">this</span>._val = val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">static</span> <span class="keyword">of</span>(val)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Functor(val);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  map(f)&#123;</div><div class="line">    <span class="keyword">return</span> Functor.of(f(<span class="keyword">this</span>._val));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  join()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  flatMap(f)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.join().map(f);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> add1 = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> num = Functor.of(Functor.of(<span class="number">42</span>)).flatMap(add1); <span class="comment">// Functor(43)</span></div></pre></td></tr></table></figure>
<p>The <code>flatten</code> and <code>map</code> approach is called <code>flatMap</code>. <code>flatMap</code> is also called <code>chain</code> in JS or other languages.</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a href="https://github.com/hemanth/functional-programming-jargon" target="_blank" rel="external">functional programming jargon</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html" target="_blank" rel="external">函数式编程入门教程</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/03/reduce_transduce.html" target="_blank" rel="external">Reduce 和 Transduce 的含义</a></li>
<li><a href="https://medium.com/@roman01la/understanding-transducers-in-javascript-3500d3bd9624" target="_blank" rel="external">Understanding Transducers in JavaScript</a></li>
<li><a href="http://www.russbishop.net/monoids-monads-and-functors" target="_blank" rel="external">Functors, Applicatives, and Monads in Plain English</a></li>
<li><a href="https://www.slideshare.net/kenbot/category-theory-for-beginners" target="_blank" rel="external">category theory for beginner</a></li>
<li><a href="https://drboolean.gitbooks.io/mostly-adequate-guide/content/" target="_blank" rel="external">mostly adequate guide</a></li>
<li><a href="https://medium.com/@tzehsiang/javascript-functor-applicative-monads-in-pictures-b567c6415221" target="_blank" rel="external">Javascript Functor, Applicative, Monads in pictures</a></li>
<li><a href="http://stackoverflow.com/questions/36558598/cant-wrap-my-head-around-lift-in-ramda-js" target="_blank" rel="external">Can’t wrap my head around “lift” in Ramda.js</a></li>
</ul>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                        <li>
                            <a href="https://twitter.com/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://www.facebook.com/zushen.yan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://github.com/zushenyan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://tw.linkedin.com/in/zushenyan" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    
                </ul>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>